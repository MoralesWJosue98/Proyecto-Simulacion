<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<title>Introduction</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
h1
	{margin-top:12.0pt;
	margin-right:-3.95pt;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	text-indent:0cm;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Arial","sans-serif";
	text-transform:uppercase;
	text-shadow:auto;}
h2
	{margin-top:18.0pt;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:36.0pt;
	text-align:center;
	text-indent:0cm;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";}
h3
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Arial","sans-serif";}
h4
	{mso-style-link:"Título 4 Car";
	margin-top:6.0pt;
	margin-right:-3.95pt;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Helvetica","sans-serif";}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:35.45pt;
	margin-bottom:.0001pt;
	text-indent:-23.45pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	font-variant:small-caps;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:24.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	font-style:italic;}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:48.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:96.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Encabezado Car";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Pie de página Car";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.MsoFootnoteReference
	{vertical-align:super;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";
	color:#424284;
	font-weight:bold;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
span.literal
	{mso-style-name:literal;
	font-family:"Courier New";
	color:blue;}
p.NOTA, li.NOTA, div.NOTA
	{mso-style-name:NOTA;
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	text-align:center;
	text-indent:-36.0pt;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-style:italic;}
p.Ttolgenricportada, li.Ttolgenricportada, div.Ttolgenricportada
	{mso-style-name:"Títol genèric portada";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:24.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.Ttolportadatipustutorial, li.Ttolportadatipustutorial, div.Ttolportadatipustutorial
	{mso-style-name:"Títol portada tipus tutorial";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
p.Textportadaexplicaci, li.Textportadaexplicaci, div.Textportadaexplicaci
	{mso-style-name:"Text portada explicació";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
p.imatge, li.imatge, div.imatge
	{mso-style-name:imatge;
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";}
p.Titolseccio, li.Titolseccio, div.Titolseccio
	{mso-style-name:"Titol seccio";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";}
p.Ttolsub-secci, li.Ttolsub-secci, div.Ttolsub-secci
	{mso-style-name:"Títol sub-secció";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.PuntExplicaci, li.PuntExplicaci, div.PuntExplicaci
	{mso-style-name:"Punt Explicació";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:46.35pt;
	text-align:center;
	text-indent:-18.0pt;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
p.Titulo1sinnumero, li.Titulo1sinnumero, div.Titulo1sinnumero
	{mso-style-name:"Titulo 1 sin numero";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:0cm;
	font-size:16.0pt;
	font-family:"Arial","sans-serif";
	text-transform:uppercase;
	text-shadow:auto;
	font-weight:bold;}
p.Estilo1, li.Estilo1, div.Estilo1
	{mso-style-name:Estilo1;
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Courier New";}
p.Estilo2, li.Estilo2, div.Estilo2
	{mso-style-name:Estilo2;
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
span.Ttulo4Car
	{mso-style-name:"Título 4 Car";
	mso-style-link:"Título 4";
	font-family:"Helvetica","sans-serif";
	font-weight:bold;}
span.EncabezadoCar
	{mso-style-name:"Encabezado Car";
	mso-style-link:Encabezado;
	font-family:"Arial","sans-serif";}
span.PiedepginaCar
	{mso-style-name:"Pie de página Car";
	mso-style-link:"Pie de página";
	font-family:"Arial","sans-serif";}
 /* Page Definitions */
 @page Section1
	{size:595.3pt 841.9pt;
	margin:70.9pt 3.0cm 70.9pt 3.0cm;}
div.Section1
	{page:Section1;}
@page Section2
	{size:595.3pt 841.9pt;
	margin:70.85pt 3.0cm 70.85pt 3.0cm;}
div.Section2
	{page:Section2;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-US>

<div class=Section1>

<h3 style='text-align:justify;text-justify:inter-ideograph'>GiD PROBLEM TYPE:
AN EXAMPLE </h3>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
tutorial takes you through the steps involved in defining a problem type using
GiD. A problem type is a set of files configured by GiD so that the program can
prepare data to be analyzed.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>A
simple example has been chosen which takes us through all the associated
configuration files while using few lines of code. Particular emphasis is given
to the calculation of the centers of mass for two-dimensional surfaces <span
style='font-family:Symbol'>-</span> a simple formulation both conceptually and
numerically.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
tutorial is composed of the following steps: </p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><a name="_Hlt473624869"></a><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Starting the problem </p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Creating the materials definition file </p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Creating the general configurations file  </p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Creating the conditions definition file </p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Creating the data format file </p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Creating the calculating program file and the execution files </p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-18.0pt'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Executing the calculating module and visualizing the results
using GiD</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal><img width=177 height=177 src="cmas2d_files/image001.jpg"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>By
the end of the example, you should be able to create a calculating module that
will interpret the mesh generated in GiD Preprocess. The module will calculate
values for each element of the mesh and store the values in a file in such a
way as they can be read by GiD Post-process. </p>

</div>

<span style='font-size:9.0pt;font-family:"Arial","sans-serif"'><br clear=all
style='page-break-before:auto'>
</span>

<div class=Section2>

<h3 style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461277">Introduction</a> </h3>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Our
aim is to solve a problem that involves calculating the center of gravity
(center of mass) of a 2D object. To do this, we need to develop a calculating
module that can interact with GiD. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461278">The problem: center of mass</a> </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
center of mass (xCM,yCM) of a two-dimensional body is defined as</p>

<p class=MsoNormal><img width=184 height=61 src="cmas2d_files/image002.gif">                 <img
width=183 height=61 src="cmas2d_files/image003.gif"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>where
<span style='font-family:Symbol'>r</span>(x,y) is the density of the material
at point (x,y) and S is the surface of the body.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>If
we consider the N gravitational forces as pi =g mi, each one concentrated on
point (xi,yi), the new center of mass will be modified as follows: </p>

<p class=MsoNormal><img width=211 height=88 src="cmas2d_files/image004.gif">        <img
width=213 height=88 src="cmas2d_files/image005.gif"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>To
solve the problem numerically, the integrals will be transformed into sums: </p>

<p class=MsoNormal><img width=489 height=88 src="cmas2d_files/image006.gif"><img
width=2 height=5 src="cmas2d_files/image007.gif"><br clear=ALL>
</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Each
of the N elements is treated as concentrated weight whose mass N1 is defined as
the product of the (surface) density and the surface of the element.</p>

<h3 style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461279">Interaction of GiD with the calculating module</a> </h3>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>GiD
Preprocess makes a discretization of the object under study and generates a
mesh of elements, each one of which is assigned a material and some conditions.
This preprocessing information in GiD (mesh, materials, and conditions) enables
the calculating module to generate results. For the present example, the
calculating module will find the distance of each element relative to the
center of mass of the object. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Finally,
the results generated by the calculating module will be read and visualized in
GiD Post-process.</p>

<p class=MsoNormal><img width=271 height=192 src="cmas2d_files/image008.jpg"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>GiD
must adapt these data to deal with them. Materials, boundary and/or load
conditions, and problem data in general must be defined.   </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>GiD
configuration is accomplished through text formatted files. The following files
are required:  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.prb:
configuration of the general parameter </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.mat:
configuration of materials and their properties </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.cnd:
configuration of the conditions imposed on the calculation </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.bas:
(template file) the file for configuring the format of the interchange that
mediates between GiD data and the calculating module. The file for
interchanging the data exported by GiD has the extension .dat. This file stores
the geometric and physical data of the problem. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.bat:
the file that can be executed in batches called from GiD. This file initiates
the calculating module. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
calculating module (in this example cmas2d.exe) solves the equations in the
problem and saves the results in the results file. This module may be programmed
in the language of your choice.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>GiD
Post-process reads the following files generated by the calculating module:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>project_name.post.res: 
results file. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Each
element of the mesh corresponds to a value.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>project_name.post.msh: 
file containing the post-process 2D mesh. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>If
this file does not exist, GiD uses the preprocess mesh in the postprocess.</p>

<span style='font-size:9.0pt;font-family:"Arial","sans-serif"'><br clear=all
style='page-break-before:always'>
</span>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Diagram
depicting the files system: </p>

<p class=MsoNormal><img width=434 height=548 src="cmas2d_files/image009.jpg"></p>

<h3 style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461280">Implementation</a></h3>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461281">Creating the Subdirectory for the Problem Type</a></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Create
the subdirectory &quot;cmas2d.gid&quot;. This subdirectory has a .gid extension
and will contain all the configuration files and calculating module files
(.prb, .mat, .cnd, .bas, .bat, .exe). </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
width=29 height=20 src="cmas2d_files/image010.gif">NOTE: In Windows systems,
if you want the problem type to appear in the GiD Data<span style='font-family:
Wingdings'>à</span>Problem type menu, create the subdirectory within
&quot;Problemtypes&quot;, located in the GiD folder <span style='font-family:
Symbol'>-</span> for instance, C:\GiDWin\Problemtypes\cmas2d.gid</p>

<b><span lang=ES-TRAD style='font-size:10.0pt;font-family:"Helvetica","sans-serif"'><br
clear=all style='page-break-before:always'>
</span></b>

<h4 style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461282"><span lang=ES-TRAD>Creating the Materials File</span></a><span
lang=ES-TRAD> </span></h4>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Create
the materials file &quot;cmas2d.mat&quot;. This file stores the physical
properties of the material under study for the problem type. In this case,
defining the density will be sufficient.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Enter
the materials in the &quot;cmas2d.mat&quot; file using the following format:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>NUMBER:
Identifier of the material </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>MATERIAL:
Name of the material (without spaces) </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
Property of the material. For this example, we are interested in the density of
the material.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
Value of the property </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
MATERIAL</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In
GiD, the information pertaining to the &quot;cmas2d.mat&quot; file is managed
in the materials window, located in Data<span style='font-family:Wingdings'>à</span>Materials.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>File:
cmas2d.mat</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:38.95pt;border-collapse:collapse;border:none'>
 <tr style='page-break-inside:avoid'>
  <td width=217 rowspan=2 valign=top style='width:163.0pt;border:none;
  background:#D9D9D9;padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>MATERIAL:
  Air</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
  Density</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
  1.01</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
  MATERIAL</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>MATERIAL:
  Steel</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
  Density</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
  7850</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
  MATERIAL</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>MATERIAL:
  Aluminium</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
  Density</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
  2650</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
  MATERIAL</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>MATERIAL:
  Concrete</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
  Density</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
  2350</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
  MATERIAL</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>MATERIAL:
  Water</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
  Density</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
  997</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
  MATERIAL</p>
  </td>
  <td width=302 valign=top style='width:8.0cm;border:none;padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
  width=257 height=178 src="cmas2d_files/image011.jpg"></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
  GiD Materials window, for assigning materials</p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=302 valign=top style='width:8.0cm;border:none;padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<b><span lang=ES-TRAD style='font-size:10.0pt;font-family:"Helvetica","sans-serif"'><br
clear=all style='page-break-before:always'>
</span></b>

<h4 style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461283"><span lang=ES-TRAD>Creating the General File</span></a><span
lang=ES-TRAD> </span></h4>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Create
the &quot;cmas2d.prb&quot; file. This file contains general information for the
calculating module, such as the units system for the problem, or the type of
resolution algorithm chosen.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Enter
the parameters of the general conditions in &quot;cmas2d.prb&quot; using the
following format:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>PROBLEM
DATA</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
Name of the parameter.  If the name is followed by the #CB# instruction, the parameter
is a display-type menu. The options in the menu must then be entered between
parentheses and separated by commas. <br>
For example, Unit_System#CB#(SI,CGS,User).</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
The default value of the parameter. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
GENERAL DATA</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In
GiD, the information in the &quot;cmas2d.prb&quot; file is managed in the
materials window, which is located in Data<span style='font-family:Wingdings'>à</span>Problem
Data.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>File:
cmas2d.prb</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:38.95pt;border-collapse:collapse'>
 <tr style='page-break-inside:avoid'>
  <td width=236 valign=top style='width:177.15pt;background:#D9D9D9;padding:
  0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>PROBLEM
  DATA</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
  Unit_System#CB#(SI,CGS,User)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
  SI</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
  Title</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
  Default_title</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
  PROBLEM DATA</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
  <td width=288 valign=top style='width:216.1pt;padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
  width=227 height=162 src="cmas2d_files/image012.jpg"></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
  GiD Problem Data window, for configuring of the general conditions of the
  cmas2d module</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<h4 style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461284"><span lang=ES-TRAD>Creating the Conditions File</span></a><span
lang=ES-TRAD> </span></h4>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Create
the &quot;cmas2d.cnd&quot; file, which specifies the boundary and/or load
conditions of the problem type in question. In the present case, this file is
where the concentrated weights on specific points of the geometry are
indicated.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Enter
the boundary conditions using the following format:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>NUMBER:
Identifier of the condition </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>CONDITION:
Name of the condition </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>CONDTYPE:
Type of entity to which the condition is to be applied.  This includes the
parameters &quot;over points,&quot; &quot;over lines,&quot; &quot;over
surfaces,&quot; and &quot;over volumes&quot;. In this example the condition is
applied &quot;over points.&quot; </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>CONDMESHTYPE:
Type of entity of the mesh to which the condition is to be applied. The
possible parameters are &quot;over nodes&quot; or &quot;over elems&quot;. In
this example, the condition is applied on nodes. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
Name of the parameter of the condition</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
Default value of the parameter </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
CONDITION </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In
GiD, the information in the &quot;cmas2d.cnd&quot; file is managed in the
conditions window, which is found in Data<span style='font-family:Wingdings'>à</span>
Conditions.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>File:
cmas2d.cnd</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:38.95pt;border-collapse:collapse'>
 <tr style='page-break-inside:avoid'>
  <td width=236 valign=top style='width:177.15pt;background:#D9D9D9;padding:
  0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>CONDITION:
  Point-Weight</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>CONDTYPE:
  over points</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>CONDMESHTYPE:
  over nodes</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>QUESTION:
  Weight</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>VALUE:
  0</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>END
  CONDITION</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
  <td width=288 valign=top style='width:216.1pt;padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
  width=236 height=179 src="cmas2d_files/image013.jpg"></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
  GiD Conditions window, for assigning the cmas2d boundary and load conditions</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461285">&nbsp;</a></p>

<h4 style='text-align:justify;text-justify:inter-ideograph'><span lang=ES-TRAD>Creating
the Data Format File (Template file)</span></h4>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Create
the &quot;cmas2d.bas&quot; file. This file will define the format of the .dat
text file created by GiD. It will store the geometric and physical data of the
problem. The .dat file will be the input to the calculating module. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
width=29 height=20 src="cmas2d_files/image010.gif">NOTE: It is not necessary
to have all the information registered in only one .bas file. Each .bas file
has a corresponding .dat file.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Write
the &quot;cmas2d.bas&quot; file as follows:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
format of the .bas file is based on commands. Text not preceded by an asterisk
is reproduced exactly the same in the .dat file created by GiD. A text preceded
by an asterisk is interpreted as a command. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Example:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.bas
file                                                                                .dat
file</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr style='height:30.7pt'>
  <td width=217 valign=top style='width:163.0pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt;height:30.7pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>%%%%
  Problem Size %%%%</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Number
  of Elements &amp; Nodes:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*nelem
  *npoin</p>
  </td>
  <td width=76 valign=top style='width:2.0cm;padding:0cm 3.5pt 0cm 3.5pt;
  height:30.7pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  style='font-family:Wingdings'>à</span></p>
  </td>
  <td width=194 valign=top style='width:145.15pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt;height:30.7pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>%%%%
  Problem Size %%%%</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Number
  of Elements &amp; Nodes:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>5379
  4678</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
contents of the &quot;cmas2d.bas&quot; file must be the following: </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.bas
file                                                                </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>==================================================================</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>          
               General Data File</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>==================================================================</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>%%%%%%%%%%%%%%%%%%
  Problem Size  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Number
  of Elements &amp; Nodes:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*nelem
  *npoin</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In
this first part of the &quot;cmas2d.bas&quot; file, general information on the
project is obtained.   </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*nelem:
returns the total number of elements of the mesh.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*npoin:
returns the total number of nodes of the mesh.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Coordinates:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> 
  Node        X                Y</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*set
  elems(all)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
  nodes</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*format
  &quot;%5i%14.5e%14.5e&quot;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NodesNum
  *NodesCoord(1,real) *NodesCoord(2,real)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*end
  nodes</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
command provides a rundown of all the nodes of the mesh, listing their
identifiers and coordinates.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop,
*end: commands used to indicate the beginning and the end of the loop. The
command *loop receives a parameter. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
nodes: the loop iterates on nodes </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
elems: the loop iterates on elements </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
materials: the loop iterates on assigned materials </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*set
elems(all): the command to include all the elements of the mesh when making the
loop.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*format:
the command to define the exit format for numerical expressions. This command
must be followed by the numerical format expressed in C.   </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NodesNum:
returns the identifier of the present node </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NodesCoord:
returns the coordinates of the present node  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NodesCoord
(n, real): returns the x, y or z coordinate in terms of the value n:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>n=1
returns the x coordinate</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>n=2
returns the y coordinate </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>n=3
returns the z coordinate</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Connectivities:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>   
  Element    Node(1)   Node(2)   Node(3)     Material</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
  elems</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*format
  &quot;%10i%10i%10i%10i%10i&quot;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*ElemsNum
  *ElemsConec  *ElemsMat </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*end
  elems</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
provides a rundown of all the elements of the mesh and a list of their
identifiers, the nodes that form them, and their assigned material.    </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*ElemsNum:
returns the identifier of the present element  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*ElemsConec:
returns the nodes of an element in a counterclockwise order   </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*ElemsMat:
returns the number of the assigned material of the present element </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Begin
  Materials</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Nº
  Materials=  *nmats</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
gives the total number of materials in the project  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*nmats:
returns the total number of materials </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Mat.         
  Density</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
  materials</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*format
  &quot;%4i%13.5e&quot;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*set
  var PROP1(real)=Operation(MatProp(Density, real))</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*MatNum
  *PROP1</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*end</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
provides a rundown of all the materials in the project and a list of the
identifiers and densities for each one.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*MatProp
(density, real): returns the value of the property &quot;density&quot; of the
material in a &quot;real&quot; format.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*Operation
(expression): returns the result of an arithmetic expression. This operation
must be expressed in C.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*Set
var PROP1(real)=Operation(MatProp(Density, real)): assigns the value returned
by MatProp (which is the value of the density of the material) to the variable
PROP1 (a &quot;real&quot; variable).  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*PROP1:
returns the value of the variable PROP1.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*MatNum:
returns the identifier of the present material </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Point
  conditions</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*Set
  Cond Point-Weight *nodes</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*set
  var NFIX(int)=CondNumEntities(int)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Concentrate
  Weights</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NFIX</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
provides the number of entities that have been assigned a particular condition.
</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*Set
Cond Point-Weight *nodes: this command enables you to select the condition to
work with from that moment on. For the present example, select the condition
&quot;Point-Weight&quot;.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*CondNumEntities(int):
returns the number of entities that have been assigned a certain condition. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*Set
var NFIX(int)= CondNumEntities(int): assigns the value returned by the command
CondNumEntities to the NFIX variable (an &quot;int&quot; variable).</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NFIX:
returns the value of the NFIX variable. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Potentials
  Prescrits:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  Node  Tipus   </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  Valor/Etiqueta</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*Set
  Cond Point-Weight *nodes</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
  nodes *OnlyInCond</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NodesNum    
  *cond(1)          </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*end</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
provides a rundown of all the nodes assigned the condition &quot;Point-Weight&quot;
with a list of their identifiers and the first &quot;weight&quot; field of the
condition in each case.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
nodes *OnlyInCond: executes a loop that will provide a rundown of only the
nodes that have been assigned a condition.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*cond(1):
returns the number 1 field of a condition previously selected with the *set
cond command. The field of the condition may also be selected using the name of
the condition, for example cond(weight).</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>File:
cmas2d.bas</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:38.95pt;border-collapse:collapse'>
 <tr style='height:51.95pt'>
  <td width=524 valign=top style='width:393.25pt;background:#D9D9D9;padding:
  0cm 3.5pt 0cm 3.5pt;height:51.95pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>=================================================================</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>                       
  General Data File</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>==================================================================</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>%%%%%%%%%%%%%%%%%%
  Problem Size  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Number
  of Elements &amp; Nodes:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*nelem
  *npoin</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>%%%%%%%%%%%%%%%%%%%
  Mesh Database  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Coordinates:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> 
  Node        X                Y</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*set
  elems(all)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
  nodes</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*format
  &quot;%5i%14.5e%14.5e&quot;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NodesNum
  *NodesCoord(1,real) *NodesCoord(2,real) </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*end
  nodes</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.................................................................</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Connectivities:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>   
  Element    Node(1)   Node(2)   Node(3)     Material</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
  elems</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*format
  &quot;%10i%10i%10i%10i%10i&quot;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*ElemsNum
  *ElemsConec *ElemsMat </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*end
  elems</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.................................................................</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Begin
  Materials</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Nº
  Materials=  *nmats</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Mat.         
  Density</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.................................................................</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
  materials</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*format
  &quot;%4i%13.5e&quot;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*set
  var PROP1(real)=Operation(MatProp(Density, real))</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*MatNum
  *PROP1</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*end</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.................................................................</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Point
  conditions</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*Set
  Cond Point-Weight *nodes</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*set
  var NFIX(int)=CondNumEntities(int)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Concentrate
  Weights</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NFIX</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.................................................................</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Potentials
  Prescrits:</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  Node  Tipus   </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  Valor/Etiqueta</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*Set
  Cond Point-Weight *nodes</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*loop
  nodes *OnlyInCond</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*NodesNum    
  *cond(1)          </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>*end</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>.................................................................</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<h4 style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461286"><span lang=ES-TRAD>Creating the Execution file of the
Calculating Module</span></a><span lang=ES-TRAD> </span></h4>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Create
the file &quot;cmas2d.c&quot;. This file contains the code for the execution
program of the calculating module. This execution program reads the problem
data provided by GiD, calculates the coordinates of the center of mass of the
object and the distance between each element and this point. These results are
saved in a text file with the extension .post.res. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Compile
and link the &quot;cmas2d.c&quot; file in order to obtain the executable
cmas2d.exe file.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
calculating module (cmas2d.exe) reads and generates the files described below. </p>

<p class=MsoNormal><img width=453 height=424 src="cmas2d_files/image014.jpg"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
width=29 height=20 src="cmas2d_files/image010.gif">NOTE: The
&quot;cmas2d.c&quot; code is explained in the appendix.</p>

<span style='font-size:9.0pt;font-family:"Arial","sans-serif"'><br clear=all
style='page-break-before:always'>
</span>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461287"><span class=Ttulo4Car><span lang=ES-TRAD>Creating the
Execution File for the Problem Type</span></span></a><span class=Ttulo4Car><span
lang=ES-TRAD> </span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Create
the &quot;cmas2d.bat&quot; file. This file connects the data file(s) (.dat) to
the calculating module (the cmas2d.exe program). When the GiD Calculate option is
selected, it executes the .bat file for the problem type selected. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>When
GiD executes the .bat file, it transfers three parameters in the following way:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>(parameter
3) / *.bat (parameter 2) / (parameter 1)</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>parameter
1: project name </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>parameter
2: project directory </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>parameter
3: Problem type location directory</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
width=29 height=20 src="cmas2d_files/image010.gif">NOTE: The .bat file as
used in Windows is explained below; the shell script for UNIX systems is also
included with the documentation of this tutorial.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'><span style='font-size:9.0pt;font-family:"Arial","sans-serif"'><br
  clear=all style='page-break-before:always'>
  </span>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>del %2\%1.log</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>del %2\%1.post.res</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>del %2\%1.post.dat</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
deletes results files from any previous calculations to avoid confusion. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'><span style='font-size:9.0pt;font-family:"Arial","sans-serif"'><br
  clear=all style='page-break-before:always'>
  </span>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>rem
  OutputFile: $2/$1.log</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>A
comment line such as &quot;rem OutputFile: file_name.log&quot; means that the
contents of the file indicated will be shown if the user clicks Output View in
Calculate<span style='font-family:Wingdings'>à</span>Calculate window.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In
this example the .log file is shown. This file contains the coordinates of the
center of mass.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal><img width=283 height=183 src="cmas2d_files/image015.jpg"></p>

<p class=MsoNormal>The Process window.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>rem
  ErrorFile: $2/$1.err</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>A
comment line such as &quot;rem ErrorFile: file_name.err&quot; means that the
indicated file will contain the errors (if any). If the .err file is present at
the end of the execution, a window comes up showing the error. The absence of
the .err file indicates that the calculation is considered satisfactory.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>GiD
automatically deletes the .err files before initiating a calculation to avoid
confusion. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>$3/cmas2d.exe
  $2/$1</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Executing
the cmas2d.exe file.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>File: cmas2d.win.bat</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:38.95pt;border-collapse:collapse'>
 <tr>
  <td width=524 valign=top style='width:393.25pt;background:#D9D9D9;padding:
  0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>@ECHO OFF</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>del %2\%1.log</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>del %2\%1.post.res</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>del %2\%1.post.dat</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>rem
  OutputFile: %2\%1.log</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>rem
  ErrorFile: %2\%1.err</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>%3\cmas2d.exe
  %2\%1</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<h3 style='text-align:justify;text-justify:inter-ideograph'>Using the
problemtype with an example </h3>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In
order to more easily understand the way the calculating module works, simple
problems with limited practical use have been chosen.  Although these problems
do not exemplify the full potential of the GiD program, the user may intuit
their answers and, therefore, compare the predicted results with those obtained
in the simulations. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc483650849"></a><a name="_Toc487461289">Executing the calculation for
an object made of homogeneous material</a> </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>From
the Files menu, select Read. Select the file ToMesh2d.gid and click Open.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal><img width=193 height=187 src="cmas2d_files/image016.jpg"></p>

<p class=MsoNormal>Contents of the &quot;ToMesh2d.gid&quot; file.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the option Data<span style='font-family:Wingdings'>à</span>Problem type<span
style='font-family:Wingdings'>à</span>Cmas2d.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
Data<span style='font-family:Wingdings'>à</span>Materials. The materials window
is opened. From the Materials menu in this window, choose the option Air. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal><img width=206 height=142 src="cmas2d_files/image017.jpg"></p>

<p class=MsoNormal>The Materials window</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Click
Assign<span style='font-family:Wingdings'>à</span>Surfaces and select all the
surfaces. Press ESC when this step is finished. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Mesh<span style='font-family:Wingdings'>à</span>Generate option.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>A
window appears in which to enter the maximum element size for the mesh to be
generated. Enter 2 and click OK. The mesh shown  will be obtained.</p>

<p class=MsoNormal><img width=189 height=190 src="cmas2d_files/image018.jpg"></p>

<p class=MsoNormal><a name="_Ref483645110">The mesh of the object</a></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Now
the calculation may be initiated. Choose the Calculate option from the
Calculate menu, thus executing the calculating module.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Wait
until a box appears indicating that the calculation has finished.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal><img width=280 height=118 src="cmas2d_files/image019.jpg"></p>

<p class=MsoNormal>Process information box</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the option Files<span style='font-family:Wingdings'>à</span>Postprocess. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>From
the Windows menu, choose the View Results option. A window appears from which
to visualize the results. By default, no result is visualized on entering the
postprocessing component.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>From
the View combo box in the View Results window, choose the Contour Fill option.
A set of available result are displayed.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<div align=center>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse'>
 <tr>
  <td width=288 valign=top style='width:216.1pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><img width=259 height=234
  src="cmas2d_files/image020.jpg"></p>
  </td>
  <td width=288 valign=top style='width:216.1pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><img width=259 height=234
  src="cmas2d_files/image021.jpg"></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal>The View Results window.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> Now
choose the MC-DISTANCE result and click Apply. A graphic representation of the
calculation is obtained.</p>

<p class=MsoNormal><img width=191 height=187 src="cmas2d_files/image022.jpg"></p>

<p class=MsoNormal>Visualizing the distance (MC-DISTANCE) from the center of
mass of the object <br>
to each element, for an object of homogeneous material</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
results shown on the screen reproduce those we anticipated at the outset of the
problem: the center of mass of an object made of homogeneous material coincides
with its geometric center. The .log file will provide the exact coordinates of
this point.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<h4 style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461290"><span lang=ES-TRAD>Executing the calculation for an object
made of heterogeneous material</span></a></h4>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Files<span style='font-family:Wingdings'>à</span>preprocess option.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Data<span style='font-family:Wingdings'>à</span>Materials option. The
Materials window is opened. From the Materials menu in this window, choose
Steel.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal><img width=206 height=142 src="cmas2d_files/image023.jpg"></p>

<p class=MsoNormal>The Materials window, with &quot;Steel&quot; selected</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Click
Assign<span style='font-family:Wingdings'>à</span>Surfaces and select the
surface indicated in the figure. Press ESC when this step is finished. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal><img width=190 height=188 src="cmas2d_files/image024.jpg"></p>

<p class=MsoNormal>Assigning the material &quot;Steel&quot; to the surface
indicated</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Mesh<span style='font-family:Wingdings'>à</span>Generate option.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>A
window appears in which to enter the maximum element size for the mesh to be
generated. Enter 2 and click OK.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Calculate option from the Calculate menu, thus executing the calculating
module. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Files<span style='font-family:Wingdings'>à</span>Postprocess option.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Visualize
the new results. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=288 valign=top style='width:216.1pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
  width=265 height=300 src="cmas2d_files/image025.jpg"></p>
  </td>
  <td width=288 valign=top style='width:216.1pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
  width=265 height=300 src="cmas2d_files/image026.jpg"></p>
  </td>
 </tr>
 <tr>
  <td width=288 valign=top style='width:216.1pt;border:none;padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Visualizing
  the materials  making up the object </p>
  </td>
  <td width=288 valign=top style='width:216.1pt;border:none;padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Visualizing
  the distance (MC-DISTANCE) from the center of mass of the object to each
  element, for an object of heterogeneous material</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal>As anticipated, the center of mass is displaced toward the
material with greater density.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461291">&nbsp;</a></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Executing
the calculation for an object of heterogeneous material and subject to external
point- weight</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Files<span style='font-family:Wingdings'>à</span>preprocess option.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Data<span style='font-family:Wingdings'>à</span>Conditions option. A window
is opened in which the conditions of the problem should be entered.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Since
the condition to be entered acts over points, select over points from the Type
menu in the Conditions window. </p>

<p class=MsoNormal><img width=189 height=143 src="cmas2d_files/image027.jpg"></p>

<p class=MsoNormal>The Conditions window</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Enter
the value 5e6 in the Weight box. Click Assign and select the point indicated in
the figure. Press ESC when this step is finished. </p>

<p class=MsoNormal><img width=242 height=173 src="cmas2d_files/image028.gif"></p>

<p class=MsoNormal>The point subject to external weight</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
Mesh<span style='font-family:Wingdings'>à</span>Generate. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>A
window appears in which to enter the maximum element size for the mesh to be
generated. Enter 2 and click OK.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Calculate option from the Calculate menu, thus executing the calculating
module.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Choose
the Files<span style='font-family:Wingdings'>à</span>Postprocess option.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Visualize
the new results.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal><img width=186 height=187 src="cmas2d_files/image029.jpg"></p>

<p class=MsoNormal>Visualizing the distance (MC-DISTANCE) from the center of
mass to each element, for an object of heterogeneous material subject to point
weight</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Now
the condition is external point-weight. As anticipated, the new center of mass
is displaced toward the point under weight.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461292">&nbsp;</a></p>

<h3 align=left style='text-align:left'>Appendix</h3>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><a
name="_Toc487461293">&nbsp;</a></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
program code for the calculating module </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
structure of the program that calculates the center of mass (cmas2d.c) is the
following: </p>

<p class=MsoNormal><img width=458 height=455 src="cmas2d_files/image030.jpg"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><img
width=29 height=20 src="cmas2d_files/image010.gif">NOTE: In this example, a
code for the program will be developed in C. Nevertheless, any language of
choice may be used. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
code of the program that calculates the center of mass (cmas2d.c) is as
follows: </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
cmas2d.c file</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr style='height:154.9pt'>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt;height:154.9pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;stdio.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;stdlib.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;fcntl.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;string.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;math.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#define
  MAXMAT 1000</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#define
  MAXCND 1000</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>char
  projname[80];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>int
  i, ielem, inod, icnd;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>double *x, *y</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>int *N, *imat;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>int 
  nodc[MAXCND];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>double
  rho[MAXMAT], wval[MAXCND];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>int
  Nelem, Nnod, Nmat, Ncnd;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>double x_CG, y_CG</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>void input(void);</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  calculate(void);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  output(void);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Declaration
of variables and constants used in the program.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  main (int argc, char *argv[])</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  strcpy (projname, argv[1]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  input();</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  calculate();</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  output();</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> }</p>
  </td>
 </tr>
</table>

<h4 align=left style='text-align:left'><span lang=ES-TRAD>&nbsp;</span></h4>

<h4 align=left style='text-align:left'><span lang=ES-TRAD>The main program. </span></h4>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
main program is called from the cmas2d.bat file and has as its parameters the
name of the project. This name is stored in the variable projname. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
main program calls the input (), calculate () and output () functions.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
input function reads the .dat file generated by GiD. The .dat file contains
information about the mesh.  The calculate function read and processes the data
and generates the results.  The output function creates the results files.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'><span lang=FR style='font-size:9.0pt;font-family:
  "Arial","sans-serif"'><br clear=all style='page-break-before:always'>
  </span>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>void input ()</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR> {</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   char filedat[80], sau1[80], sau2[80];</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   FILE* fp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   Int aux,j;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   </span>Void jumpline (FILE*);  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  Strcpy(filedat, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  Strcat(filedat,&quot;.dat&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fp = fopen(filedat, &quot;r&quot;);</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The 
input() function.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
first part of the input function links the project name with the .dat
extension, thus obtaining the name of the file that is to be read.  This file
is opened in order to be read.   </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
jumpline(FILE*) function is declared.  This function reads 80 bytes of the file
that it receives as a parameter.  It will also be used to jump lines of the text
when reading the .dat file.   </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>for
  (i=0;  i&lt;6; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fscanf(fp, &quot;%d %d&quot;, &amp;Nelem, &amp;Nnod);</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
first six lines of the .dat file are jumped over since these are lines of
information for the user (see .bas file). Then the total number of elements and
nodes of the project are read and stored in the variables  Nelem and Nnod
respectively.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  x=(double *) malloc((Nnod+1)*sizeof(double)); if (x==NULL) {error=1;}</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  y=(double *) malloc((Nnod+1)*sizeof(double)); if (y==NULL) {error=1;}</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  N=   (int *) malloc((Nelem+1)*3*sizeof(int)); if (N==NULL) {error=1;}</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  imat=(int *) malloc((Nelem+1)*sizeof(int));   if (N==NULL) {error=1;}</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  if (error)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  strcpy(fileerr, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  strcat(fileerr,&quot;.err&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  ferr = fopen(fileerr, &quot;w&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  fprintf(ferr, &quot;\n \n \n ***** ERROR: Not enough memory. *****
  \n&quot;);               </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  fprintf(ferr, &quot;(Try to calculate with less
  elements)\n&quot;);               </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  exit(1);  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>   
  }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;6; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Space
is reserved for storing the coordinates of the nodes (pointers x, y), the
connectivities (pointer N), and the materials corresponding to each element
(pointer imat). </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>In
case of error (insufficient memory), a file is created with the extension .err.
This file contains information about the error and the program is aborted.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
next six lines are jumped over.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>/*
  reading the coordinates */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (inod=1; inod&lt;=Nnod; inod++)       </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  <span lang=FR>fscanf (fp, &quot;%d %lf %lf&quot;, &amp;aux, &amp;x[inod],
  &amp;y[inod]);  </span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   </span>for (i=0;  i&lt;6; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
coordinates of the nodes are read and stored in the  x and y variables. The
node identifier indexes the tables of coordinates.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>/*
  reading connectivities */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (ielem=1; ielem&lt;=Nelem; ielem++){</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  fscanf (fp, &quot;%d&quot;, &amp;aux);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  for(j=0;j&lt;3;j++) fscanf (fp, &quot;%d&quot;, &amp;N[(ielem-1)*3+j]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  fscanf (fp, &quot;%d&quot;, &amp;imat[ielem]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  if (imat[ielem]==0)    </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  {strcpy(fileerr, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  strcat(fileerr,&quot;.err&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  ferr = fopen(fileerr, &quot;w&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  fprintf(ferr,&quot;\n \n \n **ERROR: Elements with no material!!**\n&quot;); </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  exit(1);  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  }</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
connectivities are read and the N variable is saved. This variable is a Nelem x
3- size table with two fields.  The nodes (3 nodes) forming the element are saved
in the first field.  The element identifiers are saved in the second.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>All
the elements are checked, ensuring that they have been assigned a material. If
the identifier of the material is 0 (meaning that no material has been assigned
to the element), an  .err file is created containing information about the
error and the program is aborted.  <br>
 </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;5; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fscanf(fp, &quot;%s %s  %d&quot;,sau1, sau2, &amp;Nmat );</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;3; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  /* reading density of each material */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=1; i&lt;=Nmat; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  fscanf (fp, &quot;%d %lf&quot;, &amp;aux, &amp;rho[i]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>   
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;4; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  /* reading conditions*/</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fscanf(fp, &quot;%d&quot;, &amp;Ncnd);  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;6; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (icnd=1; icnd&lt;=Ncnd; icnd++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  { </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  fscanf (fp, &quot;%d %lf&quot;, &amp;nodc[icnd], &amp;wval[icnd]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fclose (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Reading
the remaining information in the .dat file.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
total number of materials is read and stored in the Nmat variable.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
density of each material are read and stored in the rho table. The material
identifier indexes the densities.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
total number of conditions is read and stored in the Ncnd variable.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
nodes associated with a condition are read and stored in the nodc table indexed
by the condition identifier. The value of the condition is stored in wval,
another table indexed by the condition identifier. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>void calculate ()</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR> {</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   double v,aux1,aux2,aux3;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   int n1, n2, n3;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   int mat;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   double x_CGi, y_CGi;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   double x_num=0, y_num=0, den=0;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
calculate() function. This is the function that calculates the center of mass. 
</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Declaration
of the local variables used in calculate(). </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (ielem=1; ielem&lt;=Nelem; ielem++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  n1= N[0+(ielem-1)*3];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  n2= N[1+(ielem-1)*3];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  n3= N[2+(ielem-1)*3];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  /* Calculating the volume (volume is the area, provided we</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>        
  are dealing with 3D surfaces) */  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  <span lang=ES>v=fabs(x[n1]*y[n2]+x[n2]*y[n3]+x[n3]*y[n1]-x[n1]*y[n3]-x[n2]*y[n1]-  
  x[n3]*y[n2])/2;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       </span>/* The geometric center of the element is calculated */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  <span lang=ES>x_CGi= (x[n1]+x[n2]+x[n3])/3;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       y_CGi= (y[n1]+y[n2]+y[n3])/3;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       </span>/* sums are calculated*/</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  mat= imat[ielem];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  x_num+= rho[mat]*v*x_CGi;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>       <span
  lang=ES>y_num+= rho[mat]*v*y_CGi;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       </span>den+= rho[mat]*v;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  }</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Main
loop of the calculating function.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
identifiers of the nodes of the present element are saved in n1, n2, n3.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>This
loop makes a rundown of all the elements in the mesh. The volume is calculated
for each element. (Here, the volume is the area, provided we are dealing with
3D surfaces.)   The volume calculations are stored in the v variable.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
geometric center of the element is calculated (coinciding with the center of
gravity) and the coordinates are stored in the x_Cgi and y_Cgi variables.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
numerator sums are calculated. When the loop is finished, the following sums
are stored in the  x_num and y_num variables:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>x_num
=<img width=116 height=37 src="cmas2d_files/image031.gif"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>y_num
=<img width=117 height=37 src="cmas2d_files/image032.gif"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
denominator sum is calculated. When the loop is finished, the following sum is
stored in the den variable:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>den
=<img width=85 height=37 src="cmas2d_files/image033.gif"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>/*
  point weights */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (icnd=1; icnd&lt;=Ncnd; icnd++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  inod= nodc[icnd];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  x_num+= wval[icnd]*x[inod];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  <span lang=ES>y_num+= wval[icnd]*y[inod];</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       </span>den+= wval[icnd]; </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  }  </p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Then,
the calculations associated with point-weights are run using a loop that makes
a rundown of all the conditions.   </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
results are added to the  x_num, y_num, and den variables, as seen in the
formulae:</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>x_num
=<img width=116 height=37 src="cmas2d_files/image031.gif"> +     <img
width=60 height=45 src="cmas2d_files/image034.gif"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>y_num
=<img width=117 height=37 src="cmas2d_files/image032.gif"> +    <img
width=61 height=45 src="cmas2d_files/image035.gif"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
value of point-weights is added to the variable den.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>den
=<img width=85 height=37 src="cmas2d_files/image033.gif"> +  <img width=39
height=45 src="cmas2d_files/image036.gif"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  x_CG= (x_num/den);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  <span lang=ES>y_CG= (y_num/den);</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES> </span>}</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Finally,
the result of dividing the x_num and  y_num variables by the den variable is
stored in the x_CG and y_CG variables.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>x_CG
= (x_num/den)         <span style='font-family:Wingdings'>à</span>            x_CG
= <img width=189 height=88 src="cmas2d_files/image037.gif">  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>y_CG = (y_num/den)         </span><span style='font-family:Wingdings'>à</span><span
lang=ES>            y_CG = </span><img width=195 height=88
src="cmas2d_files/image038.gif"></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>&nbsp;</span></p>

<span lang=ES style='font-size:9.0pt;font-family:"Arial","sans-serif"'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
lang=ES>&nbsp;</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'><span style='font-size:9.0pt;font-family:"Arial","sans-serif"'><br
  clear=all style='page-break-before:always'>
  </span>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  output()</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  char filedat[80];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  FILE *fp, *fptest;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  float raiz;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  double pot;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
output() function.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
output() function creates two files: .post.res, and .log.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
results to be visualized in GiD Post-process are stored in the .post.res file.
It is this file that stores the data which enables GiD to represent the
distance of each point from the corresponding center of mass. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
numerical value of the center of mass is saved in the .log file. The accuracy
of this value is directly proportional to the element size.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'><span style='font-size:9.0pt;font-family:"Arial","sans-serif"'><br
  clear=all style='page-break-before:always'>
  </span>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  strcpy(filedat, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  strcat(filedat,&quot;.log&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fptest = fopen(filedat, &quot;w&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fprintf (fptest, &quot;FILE: %s\n&quot;, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fprintf (fptest, &quot;CMAS2D\n2D routine to calculate the mass center</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>           
  of an heterogeneus object. \n 2008\t</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>           
  <span lang=FR>CIMNE\n&quot;);</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   fprintf (fptest, &quot;\n\n\t====&gt; mass center: %lf %lf
  \n&quot;, x_CG, y_CG);</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Creating
the .log file.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
.log extension is added to the project name and a file is created that will
contain the numerical value of the position of the center of mass, which in
turn is stored in the x_CG and y y_CG variables of the program. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Creating
the .post.res file. The output data (results) are stored in this file. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The format
of the .post.res file is as follows: </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>On
the first line, enter the variables defining the type of result. The first
parameter of the line is the title appearing in the GiD post-process menu. For
this example, the title MC-DISTANCE has been chosen.  </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Then
enter the values   2    1    1    1    0. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
first parameter is the type of analysis: 2 correspond to a load analysis. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
second parameter is the number of steps in the calculation. In this example
there is 1 step. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
third parameter is the type of result: 1 corresponds to a scalar result. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
fourth parameter is the position associated to the results: 1 means the results
are associated with nodes. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>The
fifth parameter is a description of each component: 0 means there is no
description. </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>To conclude,
list the results (distance from the center of mass) in the following format: </p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Node
identifier (inod)   associated result (pot)</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:67.3pt;border-collapse:collapse'>
 <tr>
  <td width=482 valign=top style='width:361.45pt;border:solid windowtext 1.0pt;
  padding:0cm 3.5pt 0cm 3.5pt'><span style='font-size:9.0pt;font-family:"Arial","sans-serif"'><br
  clear=all style='page-break-before:always'>
  </span>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>/*
  jumpline function */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  jumpline (FILE* filep)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  char buffer[80];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fgets(buffer, 80, filep);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> }</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>Executing
the Jumpline function.</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>File:
cmas2d.c</p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:38.95pt;border-collapse:collapse'>
 <tr>
  <td width=524 valign=top style='width:393.25pt;background:#D9D9D9;padding:
  0cm 3.5pt 0cm 3.5pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;stdio.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;stdlib.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;fcntl.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;string.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#include
  &lt;math.h&gt;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#define
  MAXMAT 1000</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>#define
  MAXCND 1000</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>char
  projname[1024];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>int
  i, ielem, inod, icnd;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>double *x, *y;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>int *N, *imat;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>int 
  nodc[MAXCND];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>double
  rho[MAXMAT], wval[MAXCND];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>int
  Nelem, Nnod, Nmat, Ncnd;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>double x_CG, y_CG;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  input(void);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  calculate(void);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  output(void);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  main (int argc, char *argv[])       </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> {     
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  strcpy (projname, argv[1]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  input();</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  calculate();</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  output();</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  input ()</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> <span
  lang=FR>{</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   char filedat[80], sau1[80], sau2[80];</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   FILE* fp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   int aux,j;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   void jumpline (FILE*);  </span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   </span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   </span>strcpy(filedat, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  strcat(filedat,&quot;.dat&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fp = fopen(filedat, &quot;r&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;6; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fscanf(fp, &quot;%d %d&quot;, &amp;Nelem, &amp;Nnod);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  x=(double *) malloc((Nnod+1)*sizeof(double)); if (x==NULL) {error=1;}</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  y=(double *) malloc((Nnod+1)*sizeof(double)); if (y==NULL) {error=1;}</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  N=   (int *) malloc((Nelem+1)*3*sizeof(int)); if (N==NULL) {error=1;}</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  imat=(int *) malloc((Nelem+1)*sizeof(int));   if (N==NULL) {error=1;}</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  if (error)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  strcpy(fileerr, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  strcat(fileerr,&quot;.err&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  ferr = fopen(fileerr, &quot;w&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  fprintf(ferr, &quot;\n \n \n *****  ERROR: Not enough memory. *****
  \n&quot;);               </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  fprintf(ferr, &quot;(Try to calculate with less
  elements)\n&quot;);               </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  exit(1);  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>   
  }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;6; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  /* reading the coordinates*/</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (inod=1; inod&lt;=Nnod; inod++)       </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  <span lang=FR>fscanf (fp, &quot;%d %lf %lf&quot;, &amp;aux, &amp;x[inod],
  &amp;y[inod]);  </span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   </span>for (i=0;  i&lt;6; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  /* reading connectivities */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (ielem=1; ielem&lt;=Nelem; ielem++){</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  fscanf (fp, &quot;%d&quot;, &amp;aux);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  for(j=0;j&lt;3;j++) fscanf (fp, &quot;%d&quot;, &amp;N[(ielem-1)*3+j]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  fscanf (fp, &quot;%d&quot;, &amp;imat[ielem]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  if (imat[ielem]==0) </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>        
  {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>         
  strcpy(fileerr, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>         
  strcat(fileerr,&quot;.err&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>         
  ferr = fopen(fileerr, &quot;w&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>         
  fprintf(ferr, &quot;\n \n \n **ERROR: Elements with no material!!**
  \n&quot;); </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>         
  exit(1);  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>        
  }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;5; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fscanf(fp, &quot;%s %s  %d&quot;,sau1, sau2, &amp;Nmat );</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;3; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  /* reading density of each material */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=1; i&lt;=Nmat; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  fscanf (fp, &quot;%d %lf&quot;, &amp;aux, &amp;rho[i]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;4; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  /* reading conditions */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fscanf(fp, &quot;%d&quot;, &amp;Ncnd);  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (i=0;  i&lt;6; i++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (icnd=1; icnd&lt;=Ncnd; icnd++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  { </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  fscanf (fp, &quot;%d %lf&quot;, &amp;nodc[icnd], &amp;wval[icnd]);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  jumpline (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fclose (fp);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  calculate ()</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> <span
  lang=FR>{</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   double v, aux1,aux2,aux3;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   int n1, n2, n3;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   int mat;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   double x_CGi, y_CGi;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>   double x_num=0, y_num=0,  den=0;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=FR>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (ielem=1; ielem&lt;=Nelem; ielem++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  n1= N[0+(ielem-1)*3];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  n2= N[1+(ielem-1)*3];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  n3= N[2+(ielem-1)*3];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  /* Calculating the volume (volume is the area, </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>         
  provided we are dealing with 3D surfaces) */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>     
  <span lang=ES>v=fabs(x[n1]*y[n2]+x[n2]*y[n3]+x[n3]*y[n1]-x[n1]*y[n3]-x[n2]*y[n1]-x[n3]*y[n2])/2;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  /* The geometric center of the element is calculated */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  <span lang=ES>x_CGi= (x[n1]+x[n2]+x[n3])/3;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       y_CGi= (y[n1]+y[n2]+y[n3])/3;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>&nbsp;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       </span>/* sums are calculated */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  mat= imat[ielem];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  x_num+= rho[mat]*v*x_CGi;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  <span lang=ES>y_num+= rho[mat]*v*y_CGi;</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES> </span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       </span>den+= rho[mat]*v;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  /* point weights */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (icnd=1; icnd&lt;=Ncnd; icnd++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  inod= nodc[icnd];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>   
     x_num+= wval[icnd]*x[inod];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  <span lang=ES>y_num+= wval[icnd]*y[inod];</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       </span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       </span>den+= wval[icnd]; </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  }  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  x_CG= (x_num/den);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>   y_CG= (y_num/den);  </span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES> </span>}</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  output()</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  char filedat[80];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  FILE *fp, *fptest;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  double raiz;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  double pot;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  strcpy(filedat, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  strcat(filedat,&quot;.log&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fptest = fopen(filedat, &quot;w&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fprintf (fptest, &quot;FILE: %s\n&quot;, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fprintf (fptest, &quot;CMAS2D\n2D routine to calculate the mass center of an
  object.\n&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  <span lang=FR>fprintf (fptest, &quot;\n\n\t====&gt; mass center: %lf %lf
  \n&quot;, x_CG, y_CG);</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  /* writing .post.res */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  strcpy(filedat, projname);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  strcat(filedat,&quot;.post.res&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fp = fopen(filedat, &quot;w&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fprintf (fp, &quot;MC-DISTANCE    2    1    1    1    0\n&quot;);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  for (inod=1; inod&lt;=Nnod; inod++)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  /* distance from the center of masses */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  <span lang=ES>raiz= (x_CG-x[inod])*(x_CG-x[inod]) +
  (y_CG-y[inod])*(y_CG-y[inod]);</span></p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'><span
  lang=ES>       </span>pot = sqrt (raiz);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>      
  fprintf (fp, &quot; %6d %14.6lf\n&quot;, inod, pot);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>    
  }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fclose (fp);   </p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fclose (fptest);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  free(x);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  free(y);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  free(N);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  free(imat);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> }</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>/*
  jumpline function */</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>void
  jumpline (FILE* filep)</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> {</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  char buffer[80];</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'>  
  fgets(buffer, 80, filep);</p>
  <p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph'> }</p>
  </td>
 </tr>
</table>

<p class=MsoCaption style='text-align:justify;text-justify:inter-ideograph'>&nbsp;</p>

</div>

</body>

</html>
